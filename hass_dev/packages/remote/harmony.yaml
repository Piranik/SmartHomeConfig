###############################################################################
# Home Assistant Package - Harmony
#  @author         :   Thomas Baxter
#  @date           :   16/02/2019
#  @version        :   0.1
#  @description    :   Configuration for Harmony Hub
#  @changelog      :   v0.1 - Initial Version
###############################################################################

###############################################################################
## Customize
###############################################################################
# homeassistant:
#   customize:

###############################################################################
## Groups
###############################################################################
group:
  harmonyhub:
    control: hidden
    name: Harmony Remote
    entities:
      - sensor.harmony_activity
      - input_select.harmony_input

###############################################################################
## Inputs
###############################################################################
input_select:
  harmony_input:
    name: Harmony - Change Input
    options:
      - Select Input
      - Watch TV
    initial: Select Input
    icon: mdi:remote

###############################################################################
## Sensors
###############################################################################
sensor:
  - platform: template
    sensors:
      harmony_activity:
        entity_id:
          - sensor.harmony_activity
        friendly_name: 'Harmony - Current Activity'
        value_template: '{{ states.remote.harmony_hub.attributes.current_activity }}'
        icon_template: >-
          {% if is_state("sensor.harmony_activity", "Watch TV") %}
            mdi:television-box
          {% else %}
            mdi:monitor
          {% endif %}

###############################################################################
## Automations
###############################################################################
# automation:
#   - alias: 'automation_update_harmony_activity'
#     trigger:
#       platform: time_pattern
#       minutes: '/1'
#     action:
#       - service: homeassistant.update_entity
#         entity_id: sensor.harmony_activity